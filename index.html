<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How Blood Gas Analysers Work: An ED Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #334155; /* slate-700 */
        }
        .header-bg {
            background-color: #0f172a; /* slate-900 */
            background-image: linear-gradient(to bottom right, #0f172a, #1e293b);
        }
        .brand-text {
            color: #f59e0b; /* amber-500 */
        }
        .section-title {
            font-weight: 900;
            font-size: 2.25rem; /* text-4xl */
            letter-spacing: -0.05em;
            color: #1e293b; /* slate-800 */
        }
        .section-subtitle {
            font-size: 1.125rem; /* text-lg */
            color: #64748b; /* slate-500 */
        }
        .card {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
        .param-card {
             border-left-width: 4px;
        }
        .param-acid-base { border-color: #3b82f6; /* blue-500 */ }
        .param-oxygenation { border-color: #ef4444; /* red-500 */ }
        .param-haemoglobin { border-color: #8b5cf6; /* violet-500 */ }
        .param-electrolyte { border-color: #10b981; /* emerald-500 */ }
        .param-metabolite { border-color: #f97316; /* orange-500 */ }

        .tech-card {
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .tech-card .tech-icon {
            transition: transform 0.3s ease;
        }
        .tech-card:hover .tech-icon {
            transform: scale(1.1);
        }
        .tech-card .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 60%);
            opacity: 1;
            transition: opacity 0.3s ease;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 2rem;
            border: 1px solid #888;
            width: 90%;
            max-width: 900px;
            border-radius: 0.75rem;
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            animation: slideIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            transition: color 0.2s ease;
        }
        .close-button:hover,
        .close-button:focus {
            color: #1e293b;
            text-decoration: none;
            cursor: pointer;
        }

        /* Animations */
        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-up.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Tab Styles */
        .tab-btn {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            color: #475569; /* slate-600 */
            border-bottom: 3px solid transparent;
            transition: color 0.2s ease, border-color 0.2s ease;
        }
        .tab-btn:hover {
            color: #0f172a; /* slate-900 */
        }
        .active-tab {
            color: #0f172a; /* slate-900 */
            border-bottom-color: #f59e0b; /* amber-500 */
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="header-bg text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <img src="https://iili.io/KGQOvkl.md.png" alt="WMEBEM Logo" class="h-14 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/100x56/0f172a/f59e0b?text=WMEBEM';">
                <div>
                    <h1 class="text-2xl font-bold tracking-tight">Blood Gas Analysers</h1>
                    <p class="text-sm text-slate-400">An Interactive Guide for Emergency Medicine</p>
                </div>
            </div>
            <nav class="hidden md:flex space-x-6">
                <a href="#introduction" class="hover:text-amber-400 transition-colors">Introduction</a>
                <a href="#parameters" class="hover:text-amber-400 transition-colors">Parameters</a>
                <a href="#applications" class="hover:text-amber-400 transition-colors">Applications</a>
                <a href="#technology" class="hover:text-amber-400 transition-colors">Technology</a>
                <a href="#pitfalls" class="hover:text-amber-400 transition-colors">Pitfalls</a>
            </nav>
        </div>
    </header>
    
    <!-- Tab Navigation -->
    <div class="bg-slate-100 border-b border-slate-200 sticky top-[84px] z-40">
        <div class="container mx-auto px-6 flex items-center space-x-1">
            <button id="infographic-tab" class="tab-btn active-tab">Infographic Guide</button>
            <button id="deep-dive-tab" class="tab-btn">Deep Dive</button>
        </div>
    </div>


    <!-- Main Content: Infographic -->
    <div id="infographic-content">
        <main class="container mx-auto px-6 py-12 md:py-16">
            <!-- Section 1: Introduction -->
            <section id="introduction" class="mb-20 fade-in-up">
                <div class="text-center">
                    <h2 class="section-title">The Clinical Imperative of Blood Gas Analysis</h2>
                    <p class="section-subtitle mt-4 max-w-3xl mx-auto">
                        One of the most vital diagnostic tests in acute medicine, providing a rapid, quantitative assessment of a patient's respiratory and metabolic status to guide life-saving interventions.
                    </p>
                </div>
                <div class="mt-12 grid md:grid-cols-2 gap-8 items-center">
                    <div class="card p-8">
                        <h3 class="text-xl font-bold text-slate-800 mb-3">Acid-Base Homeostasis</h3>
                        <p class="text-slate-600">The body maintains a delicate pH balance (7.35-7.45) for optimal enzyme function. This is managed by the coordinated action of the respiratory system (regulating CO₂) and the renal system (regulating HCO₃⁻).</p>
                    </div>
                    <div class="card p-8 bg-slate-800 text-white">
                        <h3 class="text-xl font-bold mb-3">The Henderson-Hasselbalch Equation</h3>
                        <p class="text-slate-300">This equation is the cornerstone of acid-base interpretation. Modern analysers directly measure pH and pCO₂, then use this relationship to calculate bicarbonate.</p>
                        <div class="mt-4 text-center p-4 bg-slate-900 rounded-lg font-mono text-amber-400 text-sm md:text-base">
                            pH = 6.1 + log ( [HCO₃⁻] / (0.03 * pCO₂) )
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Key Parameters Measured -->
            <section id="parameters" class="mb-20 fade-in-up">
                <div class="text-center mb-12">
                    <h2 class="section-title">From Blood Gas to Critical Care Panel</h2>
                    <p class="section-subtitle mt-4 max-w-3xl mx-auto">
                        Modern machines have evolved to measure a wide array of electrolytes, metabolites, and haemoglobin fractions from a single small sample.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Cards from previous version -->
                     <div class="card p-6 param-card param-acid-base">
                        <h3 class="text-lg font-bold text-blue-600 mb-2">Acid-Base Status</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>pH:</strong> 7.35 - 7.45 (Overall acidity)</li>
                            <li><strong>pCO₂:</strong> 4.7-6.0 kPa (Respiratory component)</li>
                            <li><strong>HCO₃⁻ (calc):</strong> 22-26 mmol/L (Metabolic component)</li>
                            <li><strong>Base Excess:</strong> -2 to +2 mmol/L (Overall metabolic status)</li>
                        </ul>
                    </div>
                    <div class="card p-6 param-card param-oxygenation">
                        <h3 class="text-lg font-bold text-red-600 mb-2">Oxygenation Status</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>pO₂:</strong> 11-14 kPa (Oxygen dissolved in plasma)</li>
                            <li><strong>sO₂:</strong> 95-99% (Haemoglobin O₂ saturation)</li>
                        </ul>
                    </div>
                    <div class="card p-6 param-card param-haemoglobin">
                        <h3 class="text-lg font-bold text-violet-600 mb-2">Haemoglobin (Co-oximetry)</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>tHb:</strong> Total Haemoglobin</li>
                            <li><strong>FCOHb:</strong> Carboxyhaemoglobin (CO poisoning)</li>
                            <li><strong>FMetHb:</strong> Methaemoglobin (impaired O₂ binding)</li>
                        </ul>
                    </div>
                    <div class="card p-6 param-card param-electrolyte">
                        <h3 class="text-lg font-bold text-emerald-600 mb-2">Electrolytes</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>Na⁺:</strong> 135-145 mmol/L (Fluid balance)</li>
                            <li><strong>K⁺:</strong> 3.5-5.0 mmol/L (Cardiac function)</li>
                            <li><strong>Ca²⁺ (ionised):</strong> 1.15-1.35 mmol/L (Active form)</li>
                            <li><strong>Cl⁻:</strong> 98-107 mmol/L (Acid-base balance)</li>
                        </ul>
                    </div>
                    <div class="card p-6 param-card param-metabolite">
                        <h3 class="text-lg font-bold text-orange-600 mb-2">Metabolites</h3>
                         <ul class="space-y-2 text-sm">
                            <li><strong>Glucose:</strong> 4.0-7.8 mmol/L (Blood sugar)</li>
                            <li><strong>Lactate:</strong> 0.5-2.2 mmol/L (Tissue hypoxia marker)</li>
                        </ul>
                    </div>
                    <div class="card p-6 border-l-4 border-slate-400">
                        <h3 class="text-lg font-bold text-slate-600 mb-2">Common UK Analysers</h3>
                         <p class="text-sm text-slate-500">You'll frequently encounter systems from <span class="font-semibold">Radiometer</span> (ABL series), <span class="font-semibold">Werfen</span> (GEM series), and <span class="font-semibold">Siemens</span> (RAPIDPoint) in NHS hospitals.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Clinical Applications in the ED -->
            <section id="applications" class="mb-20 fade-in-up">
                 <div class="text-center mb-12">
                    <h2 class="section-title">Clinical Applications in the ED</h2>
                    <p class="section-subtitle mt-4 max-w-3xl mx-auto">
                        The rapid, comprehensive panel from a blood gas analyser is indispensable for diagnosing and managing a vast array of critical conditions.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Respiratory Disorders</h3>
                        <p class="text-sm text-slate-600">The definitive test for assessing oxygenation and ventilation in conditions like <strong>ARDS, COPD, asthma, and pulmonary embolism</strong>. It's the gold standard for titrating respiratory support (e.g., NIV, mechanical ventilation).</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Metabolic & Endocrine Crises</h3>
                        <p class="text-sm text-slate-600">Essential for diagnosing and managing <strong>Diabetic Ketoacidosis (DKA)</strong>, revealing the severity of metabolic acidosis and guiding insulin/fluid therapy. Also crucial for identifying severe renal failure and other metabolic derangements.</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Circulatory Shock & Sepsis</h3>
                        <p class="text-sm text-slate-600"><strong>Lactate measurement is vital</strong> for identifying tissue hypoperfusion in sepsis, septic shock, and hypovolemic shock. Serial measurements are key to guiding resuscitation efforts and assessing response to treatment.</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Toxicology</h3>
                        <p class="text-sm text-slate-600"><strong>Co-oximetry is the only way to diagnose Carbon Monoxide poisoning</strong> by measuring FCOHb. The test also helps manage overdoses that cause respiratory depression or metabolic acidosis (e.g., salicylates, ethylene glycol).</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Cardiac Emergencies</h3>
                        <p class="text-sm text-slate-600">Used in <strong>cardiac arrest</strong> to identify and potentially correct underlying causes like severe acidosis or life-threatening hyperkalaemia. Helps guide management in acute heart failure with respiratory compromise.</p>
                    </div>
                     <div class="card p-6">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">Electrolyte Emergencies</h3>
                        <p class="text-sm text-slate-600">Provides rapid results for life-threatening electrolyte disturbances, especially <strong>hyperkalaemia</strong> and abnormalities in ionised calcium, allowing for immediate intervention.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Core Measurement Technologies -->
            <section id="technology" class="mb-20 fade-in-up">
                <!-- content from previous version -->
                <div class="text-center mb-12">
                    <h2 class="section-title">How It Works: The Sensor Technologies</h2>
                    <p class="section-subtitle mt-4 max-w-3xl mx-auto">
                        Blood gas analysers integrate three distinct physics-based measurement principles into a single microfluidic device. Click on each card to learn more.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div id="potentiometry-card" class="card tech-card p-6 text-white bg-slate-800" onclick="openModal('potentiometry-modal')">
                        <div class="overlay"></div>
                        <div class="relative z-10 flex flex-col h-full">
                            <div class="tech-icon">
                               <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l-3-1m-3 1l-6 18M12 4v16" /></svg>
                            </div>
                            <div class="mt-auto">
                                <h3 class="text-2xl font-bold">Potentiometry</h3>
                                <p class="mt-2 text-slate-300">Measures voltage to determine ion concentration. Used for pH, pCO₂, Na⁺, K⁺, Ca²⁺, Cl⁻.</p>
                            </div>
                        </div>
                    </div>
                    <div id="amperometry-card" class="card tech-card p-6 text-white bg-slate-800" onclick="openModal('amperometry-modal')">
                        <div class="overlay"></div>
                        <div class="relative z-10 flex flex-col h-full">
                             <div class="tech-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                            </div>
                             <div class="mt-auto">
                                <h3 class="text-2xl font-bold">Amperometry</h3>
                                <p class="mt-2 text-slate-300">Measures current from a chemical reaction. Used for pO₂, Glucose, Lactate.</p>
                            </div>
                        </div>
                    </div>
                    <div id="spectrophotometry-card" class="card tech-card p-6 text-white bg-slate-800" onclick="openModal('spectrophotometry-modal')">
                        <div class="overlay"></div>
                         <div class="relative z-10 flex flex-col h-full">
                             <div class="tech-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-violet-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                            </div>
                             <div class="mt-auto">
                                <h3 class="text-2xl font-bold">Spectrophotometry</h3>
                                <p class="mt-2 text-slate-300">(Co-oximetry) Measures light absorbance to differentiate haemoglobin species.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 5: Pre-Analytical Pitfalls -->
            <section id="pitfalls" class="fade-in-up">
                 <div class="text-center mb-12">
                    <h2 class="section-title">Pre-Analytical Pitfalls: Get it Right First Time</h2>
                    <p class="section-subtitle mt-4 max-w-3xl mx-auto">
                        The accuracy of blood gas analysis is uniquely vulnerable to errors during sample collection and handling. A bad sample gives a bad result.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
                    <div class="card p-6 border-t-4 border-red-500">
                        <div class="flex items-center mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>
                            <h3 class="text-lg font-bold text-slate-800">Air Bubbles (Anaerobic Sample)</h3>
                        </div>
                        <p class="text-sm text-slate-600">Exposure to room air (high pO₂, low pCO₂) will cause O₂ to diffuse in and CO₂ to diffuse out. Expel all bubbles immediately.</p>
                        <p class="mt-2 text-sm font-semibold text-red-600">Result: Falsely low pCO₂, high pH, high pO₂.</p>
                    </div>
                    <div class="card p-6 border-t-4 border-amber-500">
                        <div class="flex items-center mb-3">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            <h3 class="text-lg font-bold text-slate-800">Delay in Analysis</h3>
                        </div>
                        <p class="text-sm text-slate-600">Ongoing cellular metabolism consumes O₂ and produces CO₂/acids. Analyse immediately or transport on ice if delayed.</p>
                        <p class="mt-2 text-sm font-semibold text-amber-600">Result: Falsely low pO₂, high pCO₂, low pH.</p>
                    </div>
                    <div class="card p-6 border-t-4 border-blue-500">
                        <div class="flex items-center mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14" /></svg>
                            <h3 class="text-lg font-bold text-slate-800">Haemolysis</h3>
                        </div>
                        <p class="text-sm text-slate-600">Rupture of red blood cells (e.g., from vigorous shaking or difficult draw) releases intracellular components.</p>
                        <p class="mt-2 text-sm font-semibold text-blue-600">Result: Falsely high K⁺ (most common), but also affects AST, ALT, LDH.</p>
                    </div>
                    <div class="card p-6 border-t-4 border-purple-500">
                        <div class="flex items-center mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>
                            <h3 class="text-lg font-bold text-slate-800">Excess Heparin (Dilution)</h3>
                        </div>
                        <p class="text-sm text-slate-600">Using too much liquid heparin, or not filling the syringe to the correct volume, dilutes the entire sample.</p>
                        <p class="mt-2 text-sm font-semibold text-purple-600">Result: Falsely low values for all measured parameters (pCO₂, electrolytes, Hb).</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Main Content: Deep Dive -->
    <div id="deep-dive-content" class="hidden">
        <main class="container mx-auto px-6 py-12 md:py-16">
            <section id="deep-dive-section" class="fade-in-up">
                <div class="text-center mb-12">
                    <h2 class="section-title">Deep Dive: Advanced Interpretation</h2>
                    <p class="section-subtitle mt-4 max-w-3xl mx-auto">
                        A systematic approach to unraveling complex acid-base disorders at the bedside.
                    </p>
                </div>

                <!-- 5-Step Approach -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-slate-800 mb-6 text-center">A Systematic 5-Step Approach to ABG Interpretation</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                        <div class="card p-4 text-center">
                            <div class="mx-auto bg-slate-100 rounded-full h-16 w-16 flex items-center justify-center text-2xl font-black text-slate-500 mb-3">1</div>
                            <h4 class="font-bold">Check the pH</h4>
                            <p class="text-sm">Acidaemia (&lt;7.35), Alkalaemia (&gt;7.45), or Normal?</p>
                        </div>
                        <div class="card p-4 text-center">
                            <div class="mx-auto bg-slate-100 rounded-full h-16 w-16 flex items-center justify-center text-2xl font-black text-slate-500 mb-3">2</div>
                            <h4 class="font-bold">Primary Disorder?</h4>
                            <p class="text-sm">Is the pCO₂ or HCO₃⁻ consistent with the pH change?</p>
                        </div>
                        <div class="card p-4 text-center">
                           <div class="mx-auto bg-slate-100 rounded-full h-16 w-16 flex items-center justify-center text-2xl font-black text-slate-500 mb-3">3</div>
                            <h4 class="font-bold">Is there compensation?</h4>
                            <p class="text-sm">Has the other system responded appropriately? Use formulae.</p>
                        </div>
                        <div class="card p-4 text-center">
                            <div class="mx-auto bg-slate-100 rounded-full h-16 w-16 flex items-center justify-center text-2xl font-black text-slate-500 mb-3">4</div>
                            <h4 class="font-bold">Calculate Anion Gap</h4>
                            <p class="text-sm">If metabolic acidosis is present, is there a gap? Na⁺ - (Cl⁻ + HCO₃⁻)</p>
                        </div>
                        <div class="card p-4 text-center">
                             <div class="mx-auto bg-slate-100 rounded-full h-16 w-16 flex items-center justify-center text-2xl font-black text-slate-500 mb-3">5</div>
                            <h4 class="font-bold">Check "The Extras"</h4>
                            <p class="text-sm">Assess pO₂, Lactate, Glucose, K⁺, and Co-oximetry.</p>
                        </div>
                    </div>
                </div>

                <!-- Anion Gap & Key Formulae -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-slate-800 mb-4">The Anion Gap (AG)</h3>
                        <p class="text-slate-600 mb-4">Essential for evaluating metabolic acidosis. It represents the unmeasured anions in the plasma.</p>
                        <div class="mb-4 text-center p-4 bg-slate-100 rounded-lg font-mono text-slate-800">
                           AG = [Na⁺] - ([Cl⁻] + [HCO₃⁻])
                        </div>
                        <p class="text-slate-600 mb-4">A normal AG is typically <strong>8-12 mmol/L</strong>. A high AG indicates the presence of an unmeasured acid.</p>
                        <h4 class="font-bold text-slate-700 mb-2">High Anion Gap Metabolic Acidosis (HAGMA) Causes: GOLDMARK</h4>
                        <ul class="list-disc list-inside text-slate-600 text-sm space-y-1">
                            <li><strong>G</strong>lycols (ethylene, propylene)</li>
                            <li><strong>O</strong>xoproline (paracetamol toxicity)</li>
                            <li><strong>L</strong>-Lactate (sepsis, shock, metformin)</li>
                            <li><strong>D</strong>-Lactate (rare, gut malabsorption)</li>
                            <li><strong>M</strong>ethanol</li>
                            <li><strong>A</strong>spirin (salicylates)</li>
                            <li><strong>R</strong>enal Failure (uraemia)</li>
                            <li><strong>K</strong>etoacidosis (diabetic, alcoholic, starvation)</li>
                        </ul>
                    </div>
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-slate-800 mb-4">Key Clinical Formulae</h3>
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-bold text-slate-700">Winter's Formula (Metabolic Acidosis)</h4>
                                <p class="text-sm text-slate-600 mb-2">Predicts the expected respiratory compensation. If the measured pCO₂ is higher than expected, there is a concurrent respiratory acidosis.</p>
                                <div class="p-3 bg-slate-100 rounded-lg font-mono text-slate-800 text-sm">Expected pCO₂ (kPa) ≈ (0.2 × [HCO₃⁻]) + 1.1</div>
                            </div>
                            <div>
                                <h4 class="font-bold text-slate-700">Delta Gap (HAGMA)</h4>
                                <p class="text-sm text-slate-600 mb-2">Assesses for a concurrent metabolic disorder in HAGMA. A ratio of ~1-2 is expected.</p>
                                <div class="p-3 bg-slate-100 rounded-lg font-mono text-slate-800 text-sm">ΔAG / ΔHCO₃⁻ = (AG - 12) / (24 - [HCO₃⁻])</div>
                            </div>
                             <div>
                                <h4 class="font-bold text-slate-700">Arterial vs Venous Gas</h4>
                                <p class="text-sm text-slate-600">A VBG is often sufficient for pH and pCO₂. Do not rely on it for pO₂.</p>
                                <ul class="text-sm text-slate-600 list-inside list-disc">
                                    <li>Venous pH is ~0.03-0.05 lower.</li>
                                    <li>Venous pCO₂ is ~0.8-1.0 kPa higher.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-slate-800 text-slate-400 mt-20">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>&copy; 2025 WMEBEM. An educational resource based on "The Science and System of Modern Blood Gas Analysis in the United Kingdom" report.</p>
             <p class="text-xs mt-2">This is an informational tool and does not replace clinical judgment. Always follow local trust guidelines and protocols.</p>
        </div>
    </footer>
    
    <!-- Modals -->
    <!-- Potentiometry Modal -->
    <div id="potentiometry-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('potentiometry-modal')">&times;</span>
            <h2 class="section-title mb-4">Potentiometry: Measuring Voltage</h2>
            <p class="mb-6 text-slate-600">Potentiometry measures the electrical potential (voltage) difference between a <span class="font-bold">measuring electrode</span> (sensitive to a specific ion) and a stable <span class="font-bold">reference electrode</span>. This voltage is logarithmically proportional to the ion's concentration, governed by the Nernst equation.</p>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">pH: The Glass Electrode</h3>
                    <p class="text-sm text-slate-600">A special ion-sensitive glass bulb develops a potential proportional to the H⁺ concentration difference between the blood sample and an internal buffer. The entire acid-base calculation hinges on this measurement's accuracy.</p>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">pCO₂: The Severinghaus Electrode</h3>
                    <p class="text-sm text-slate-600">An ingenious indirect measurement. CO₂ gas from the sample diffuses across a membrane into a bicarbonate solution, changing its pH. An internal pH electrode measures this change, which is proportional to the pCO₂.</p>
                </div>
                <div class="md:col-span-2">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Electrolytes: Ion-Selective Electrodes (ISEs)</h3>
                    <p class="text-sm text-slate-600">A panel of electrodes, each with a unique membrane designed to be highly specific for one ion (e.g., a valinomycin membrane for K⁺, a special glass for Na⁺). They allow for simultaneous measurement of the full electrolyte panel.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Amperometry Modal -->
    <div id="amperometry-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('amperometry-modal')">&times;</span>
            <h2 class="section-title mb-4">Amperometry: Measuring Current</h2>
            <p class="mb-6 text-slate-600">Amperometry applies a constant voltage to drive an electrochemical reaction (oxidation or reduction) of the target substance. This reaction consumes or releases electrons, creating a current. The <span class="font-bold">magnitude of the current</span> is directly proportional to the substance's concentration.</p>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">pO₂: The Clark Electrode</h3>
                    <p class="text-sm text-slate-600">A polarising voltage (-0.6V) is applied across a platinum cathode and silver anode. O₂ that diffuses across a membrane is reduced at the cathode (O₂ + 2H₂O + 4e⁻ → 4OH⁻). This consumption of electrons creates a current proportional to the pO₂.</p>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Lactate/Glucose: Enzyme Biosensors</h3>
                    <p class="text-sm text-slate-600">A specific enzyme (e.g., lactate oxidase) is immobilised on the electrode. The enzyme reacts with the target (lactate), producing hydrogen peroxide (H₂O₂). The H₂O₂ is then detected amperometrically, generating a current proportional to the original lactate concentration.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Spectrophotometry Modal -->
    <div id="spectrophotometry-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('spectrophotometry-modal')">&times;</span>
            <h2 class="section-title mb-4">Spectrophotometry: Using Light</h2>
            <p class="mb-6 text-slate-600">This technique, also known as <span class="font-bold">Co-oximetry</span>, measures how different chemical substances absorb different wavelengths of light, based on the Beer-Lambert Law.</p>
            <div class="space-y-4">
                <div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">The Process</h3>
                    <ol class="list-decimal list-inside text-sm text-slate-600 space-y-2">
                        <li>The blood sample is <span class="font-semibold">haemolysed</span> (e.g., by ultrasound) to release haemoglobin from red cells.</li>
                        <li>Light is passed through the haemolysate.</li>
                        <li>A diffraction grating splits the light, and detectors measure the absorbance at many discrete wavelengths (e.g., 128+).</li>
                    </ol>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Differentiating Haemoglobin</h3>
                    <p class="text-sm text-slate-600">Oxyhaemoglobin (O₂Hb), Deoxyhaemoglobin (HHb), Carboxyhaemoglobin (COHb), and Methaemoglobin (MetHb) each have a unique light absorption spectrum. By solving simultaneous equations based on the absorbance across the spectrum, the analyser calculates the precise concentration of each species. This is crucial for diagnosing conditions like CO poisoning, which pulse oximeters miss.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = "block";
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
            document.body.style.overflow = 'auto';
        }

        window.onclick = function(event) {
            const modals = document.getElementsByClassName('modal');
            for (let i = 0; i < modals.length; i++) {
                if (event.target == modals[i]) {
                    modals[i].style.display = "none";
                    document.body.style.overflow = 'auto';
                }
            }
        }

        // Animation on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, {
            threshold: 0.1
        });

        const elements = document.querySelectorAll('.fade-in-up');
        elements.forEach(el => observer.observe(el));
        
        // Tab switching logic
        const infoTab = document.getElementById('infographic-tab');
        const deepDiveTab = document.getElementById('deep-dive-tab');
        const infoContent = document.getElementById('infographic-content');
        const deepDiveContent = document.getElementById('deep-dive-content');

        infoTab.addEventListener('click', () => {
            infoContent.style.display = 'block';
            deepDiveContent.style.display = 'none';
            infoTab.classList.add('active-tab');
            deepDiveTab.classList.remove('active-tab');
        });

        deepDiveTab.addEventListener('click', () => {
            infoContent.style.display = 'none';
            deepDiveContent.style.display = 'block';
            deepDiveTab.classList.add('active-tab');
            infoTab.classList.remove('active-tab');
        });

    </script>

</body>
</html>

